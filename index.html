<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graduate School Admission Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(220, 38, 38, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(30, 58, 138, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .container {
            background: linear-gradient(145deg, #1e293b 0%, #0f172a 100%);
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.05);
            max-width: 900px;
            width: 100%;
            padding: 50px 45px;
            border: 1px solid rgba(100, 116, 139, 0.2);
            position: relative;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #dc2626 0%, #1e3a8a 50%, #dc2626 100%);
            border-radius: 24px 24px 0 0;
        }

        h1 {
            color: #f8fafc;
            margin-bottom: 8px;
            font-size: 42px;
            text-align: center;
            letter-spacing: -0.5px;
            font-weight: 800;
            text-shadow: 0 2px 20px rgba(220, 38, 38, 0.3);
        }

        .subtitle {
            color: #94a3b8;
            margin-bottom: 40px;
            font-size: 16px;
            text-align: center;
            font-weight: 400;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #e2e8f0;
            font-weight: 600;
            font-size: 14px;
        }

        input, select {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid rgba(100, 116, 139, 0.3);
            border-radius: 10px;
            font-size: 15px;
            transition: all 0.3s ease;
            background: rgba(15, 23, 42, 0.5);
            color: #f8fafc;
        }

        input::placeholder {
            color: #64748b;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #dc2626;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
            background: rgba(15, 23, 42, 0.8);
        }

        select option {
            background: #1e293b;
            color: #f8fafc;
        }

        input[type="range"] {
            height: 6px;
            background: linear-gradient(to right, #334155 0%, #dc2626 100%);
            border-radius: 10px;
            border: none;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            background: #dc2626;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #0f172a;
            box-shadow: 0 2px 10px rgba(220, 38, 38, 0.4);
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 4px 20px rgba(220, 38, 38, 0.6);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #dc2626;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #0f172a;
            box-shadow: 0 2px 10px rgba(220, 38, 38, 0.4);
        }

        .value-display {
            text-align: right;
            color: #dc2626;
            font-weight: 700;
            margin-top: 8px;
            font-size: 15px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 10px;
            padding: 12px 16px;
            background: rgba(15, 23, 42, 0.3);
            border-radius: 10px;
            border: 1px solid rgba(100, 116, 139, 0.2);
        }

        .checkbox-group:hover {
            background: rgba(15, 23, 42, 0.5);
            border-color: rgba(220, 38, 38, 0.3);
        }

        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #dc2626;
        }

        .checkbox-label {
            color: #cbd5e1;
            font-weight: 500;
            font-size: 14px;
            margin: 0;
        }

        button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            box-shadow: 0 10px 30px rgba(220, 38, 38, 0.3);
            margin-top: 30px;
            position: relative;
            overflow: hidden;
        }

        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        button:hover::before {
            left: 100%;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(220, 38, 38, 0.5);
        }

        .result {
            margin-top: 40px;
            padding: 35px;
            background: rgba(30, 41, 59, 0.6);
            border-radius: 16px;
            display: none;
            border: 1px solid rgba(100, 116, 139, 0.3);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .result.show {
            display: block;
            animation: slideIn 0.6s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .probability {
            font-size: 64px;
            font-weight: 900;
            color: #f8fafc;
            text-align: center;
            margin-bottom: 15px;
            text-shadow: 0 4px 20px rgba(248, 250, 252, 0.2);
        }

        .result-text {
            text-align: center;
            color: #cbd5e1;
            font-size: 20px;
            margin-bottom: 30px;
            font-weight: 600;
        }

        .benchmark {
            background: rgba(30, 58, 138, 0.2);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #1e3a8a;
        }

        .benchmark-item {
            color: #93c5fd;
            font-size: 14px;
            margin: 8px 0;
            font-weight: 600;
        }

        .strength-weakness {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 25px;
        }

        .strength-box, .weakness-box {
            padding: 25px;
            border-radius: 12px;
            border: 1px solid;
        }

        .strength-box {
            background: rgba(21, 128, 61, 0.15);
            border-color: rgba(34, 197, 94, 0.3);
        }

        .weakness-box {
            background: rgba(153, 27, 27, 0.15);
            border-color: rgba(220, 38, 38, 0.3);
        }

        .strength-box h4 {
            color: #4ade80;
            margin-bottom: 15px;
            font-size: 15px;
            text-transform: uppercase;
            font-weight: 700;
        }

        .weakness-box h4 {
            color: #f87171;
            margin-bottom: 15px;
            font-size: 15px;
            text-transform: uppercase;
            font-weight: 700;
        }

        .strength-box ul, .weakness-box ul {
            margin-left: 20px;
            color: #cbd5e1;
        }

        .strength-box li, .weakness-box li {
            margin-bottom: 10px;
            font-size: 13px;
        }

        .factors {
            background: rgba(15, 23, 42, 0.6);
            padding: 28px;
            border-radius: 12px;
            margin-top: 25px;
            border: 1px solid rgba(100, 116, 139, 0.2);
        }

        .factors h3 {
            color: #f8fafc;
            margin-bottom: 20px;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            border-bottom: 2px solid rgba(220, 38, 38, 0.3);
            padding-bottom: 12px;
            font-weight: 700;
        }

        .factor-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(100, 116, 139, 0.1);
            transition: all 0.3s ease;
        }

        .factor-item:hover {
            padding-left: 10px;
            border-bottom-color: rgba(220, 38, 38, 0.3);
        }

        .factor-item:last-child {
            border-bottom: none;
        }

        .factor-label {
            color: #94a3b8;
            font-size: 14px;
        }

        .factor-value {
            color: #dc2626;
            font-weight: 700;
            font-size: 14px;
        }

        .recommendation {
            background: rgba(30, 41, 59, 0.6);
            border-left: 4px solid #dc2626;
            padding: 25px;
            margin-top: 25px;
            border-radius: 8px;
        }

        .recommendation h3 {
            color: #f8fafc;
            margin-bottom: 15px;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: 700;
        }

        .recommendation ul {
            margin-left: 20px;
            color: #cbd5e1;
        }

        .recommendation li {
            margin-bottom: 10px;
            font-size: 14px;
            line-height: 1.6;
        }

        .section-header {
            color: #f8fafc;
            font-size: 18px;
            font-weight: 700;
            margin: 35px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(220, 38, 38, 0.3);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            position: relative;
        }

        .section-header::before {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 60px;
            height: 2px;
            background: #dc2626;
        }

        .tooltip {
            color: #64748b;
            cursor: help;
            margin-left: 6px;
        }

        .tooltip:hover {
            color: #dc2626;
        }

        .data-source {
            background: rgba(30, 58, 138, 0.2);
            padding: 18px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 13px;
            color: #93c5fd;
            border-left: 4px solid #1e3a8a;
            line-height: 1.6;
        }

        .loading-message {
            text-align: center;
            padding: 30px;
            color: #94a3b8;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .strength-weakness {
                grid-template-columns: 1fr;
            }
            h1 {
                font-size: 32px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Graduate Admission Calculator</h1>
        <p class="subtitle">Advanced predictive analysis for your graduate school prospects</p>

        <form id="admissionForm">
            <div class="section-header">Program Information</div>
            
            <div class="form-group">
                <label for="programType">Program Type</label>
                <select id="programType" required>
                    <option value="">Select...</option>
                    <option value="phd">PhD Program</option>
                    <option value="masters">Master's Program (Research-based)</option>
                    <option value="professional">Professional Master's (MBA, MPA, etc.)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="targetSchool">Target Graduate School Tier</label>
                <select id="targetSchool" required>
                    <option value="">Select...</option>
                    <option value="top5">Top 5 (MIT, Stanford, Harvard, Princeton, Yale)</option>
                    <option value="top10">Top 10 (Columbia, UChicago, Penn, Caltech, Johns Hopkins)</option>
                    <option value="top25">Top 25 (Cornell, Northwestern, Duke, Michigan, etc.)</option>
                    <option value="top50">Top 50 (Strong R1 Research Universities)</option>
                    <option value="top100">Top 100 (Good Graduate Programs)</option>
                    <option value="regional">Regional Universities</option>
                </select>
            </div>

            <div class="form-group">
                <label for="specificField">Specific Field <span class="tooltip" title="More specific fields give better predictions">‚ìò</span></label>
                <select id="specificField" required>
                    <option value="">Select...</option>
                    <optgroup label="STEM">
                        <option value="cs">Computer Science</option>
                        <option value="engineering">Engineering</option>
                        <option value="math">Mathematics/Statistics</option>
                        <option value="physics">Physics</option>
                        <option value="chemistry">Chemistry</option>
                        <option value="biology">Biology/Life Sciences</option>
                    </optgroup>
                    <optgroup label="Social Sciences">
                        <option value="economics">Economics</option>
                        <option value="psychology">Psychology</option>
                        <option value="political-science">Political Science</option>
                        <option value="sociology">Sociology</option>
                    </optgroup>
                    <optgroup label="Humanities">
                        <option value="english">English/Literature</option>
                        <option value="history">History</option>
                        <option value="philosophy">Philosophy</option>
                    </optgroup>
                    <optgroup label="Professional">
                        <option value="business">Business/MBA</option>
                        <option value="public-policy">Public Policy</option>
                        <option value="education">Education</option>
                    </optgroup>
                </select>
            </div>

            <div class="section-header">Academic Background</div>

            <div class="form-group">
                <label for="gpa">Cumulative GPA (0.0 - 4.0)</label>
                <input type="number" id="gpa" step="0.01" min="0" max="4" placeholder="3.75" required>
            </div>

            <div class="form-group">
                <label for="majorGpa">Major GPA (0.0 - 4.0) <span class="tooltip" title="Your GPA in major courses">‚ìò</span></label>
                <input type="number" id="majorGpa" step="0.01" min="0" max="4" placeholder="3.85">
            </div>

            <div class="form-group">
                <label for="college">Current College/University Tier</label>
                <select id="college" required>
                    <option value="">Select...</option>
                    <option value="top10">Top 10 (Ivy League, Stanford, MIT, etc.)</option>
                    <option value="top50">Top 50 (Strong R1 Universities)</option>
                    <option value="top100">Top 100 (Good State Universities)</option>
                    <option value="other">Other Accredited Institution</option>
                </select>
            </div>

            <div class="section-header">Test Scores</div>

            <div class="checkbox-group">
                <input type="checkbox" id="greOptional">
                <label for="greOptional" class="checkbox-label">This program does not require GRE (test-optional/waived)</label>
            </div>

            <div id="greSection">
                <div class="form-group">
                    <label for="greVerbal">GRE Verbal (130-170, optional)</label>
                    <input type="number" id="greVerbal" min="130" max="170" placeholder="160">
                </div>

                <div class="form-group">
                    <label for="greQuant">GRE Quantitative (130-170, optional)</label>
                    <input type="number" id="greQuant" min="130" max="170" placeholder="165">
                </div>

                <div class="form-group">
                    <label for="greWriting">GRE Analytical Writing (0.0-6.0, optional)</label>
                    <input type="number" id="greWriting" step="0.5" min="0" max="6" placeholder="4.5">
                </div>
            </div>

            <div class="section-header">Research Experience</div>

            <div class="form-group">
                <label for="research">Years of Research Experience: <span id="researchValue">0</span></label>
                <input type="range" id="research" min="0" max="6" step="0.5" value="0">
            </div>

            <div class="form-group">
                <label for="publications">Publications (peer-reviewed): <span id="pubsValue">0</span></label>
                <input type="range" id="publications" min="0" max="15" step="1" value="0">
            </div>

            <div class="form-group">
                <label for="conferences">Conference Presentations: <span id="confsValue">0</span></label>
                <input type="range" id="conferences" min="0" max="10" step="1" value="0">
            </div>

            <div class="form-group">
                <label for="publicationQuality">Publication Quality <span class="tooltip" title="Top-tier vs local journals">‚ìò</span></label>
                <select id="publicationQuality">
                    <option value="none">No publications</option>
                    <option value="local">Local/regional journals</option>
                    <option value="mid">Mid-tier journals</option>
                    <option value="top">Top-tier journals (Nature, Science, etc.)</option>
                </select>
            </div>

            <div class="section-header">Professional Experience</div>

            <div class="form-group">
                <label for="workExp">Years of Relevant Work Experience: <span id="workExpValue">0</span></label>
                <input type="range" id="workExp" min="0" max="15" step="0.5" value="0">
            </div>

            <div class="form-group">
                <label for="teachingExp">Years of Teaching Experience: <span id="teachingExpValue">0</span></label>
                <input type="range" id="teachingExp" min="0" max="10" step="0.5" value="0">
            </div>

            <div class="section-header">Application Strength</div>

            <div class="form-group">
                <label for="lorQuality">Letters of Recommendation Quality</label>
                <select id="lorQuality" required>
                    <option value="">Select...</option>
                    <option value="generic">Generic/Standard letters</option>
                    <option value="good">Good, personalized letters</option>
                    <option value="strong">Strong letters from professors who know you well</option>
                    <option value="exceptional">Exceptional letters from renowned researchers</option>
                </select>
            </div>

            <div class="form-group">
                <label for="sopQuality">Statement of Purpose Quality</label>
                <select id="sopQuality" required>
                    <option value="">Select...</option>
                    <option value="weak">Needs improvement</option>
                    <option value="average">Average/Decent</option>
                    <option value="strong">Strong and well-written</option>
                    <option value="exceptional">Exceptional, highly compelling</option>
                </select>
            </div>

            <div class="form-group">
                <label for="awards">Honors & Awards: <span id="awardsValue">0</span></label>
                <input type="range" id="awards" min="0" max="10" step="1" value="0">
            </div>

            <div class="section-header">Additional Factors</div>

            <div class="checkbox-group">
                <input type="checkbox" id="facultyFit">
                <label for="facultyFit" class="checkbox-label">I have identified and contacted potential advisors</label>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="applyingFunding">
                <label for="applyingFunding" class="checkbox-label">Applying for funding/fellowship</label>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="international">
                <label for="international" class="checkbox-label">International student</label>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="firstGen">
                <label for="firstGen" class="checkbox-label">First-generation college student</label>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="underrepresented">
                <label for="underrepresented" class="checkbox-label">Underrepresented minority in field</label>
            </div>

            <button type="submit">Calculate My Chances</button>
        </form>

        <div id="result" class="result">
            <div class="probability" id="probability"></div>
            <div class="result-text" id="resultText"></div>
            
            <div class="benchmark" id="benchmark"></div>

            <div class="strength-weakness">
                <div class="strength-box">
                    <h4>üí™ Profile Strengths</h4>
                    <ul id="strengthsList"></ul>
                </div>
                <div class="weakness-box">
                    <h4>‚ö†Ô∏è Areas to Improve</h4>
                    <ul id="weaknessesList"></ul>
                </div>
            </div>
            
            <div class="factors">
                <h3>Detailed Score Breakdown</h3>
                <div class="factor-item">
                    <span class="factor-label">Academic Record (GPA)</span>
                    <span class="factor-value" id="gpaScore"></span>
                </div>
                <div class="factor-item">
                    <span class="factor-label">Undergraduate Institution</span>
                    <span class="factor-value" id="collegeScore"></span>
                </div>
                <div class="factor-item">
                    <span class="factor-label">Research Experience</span>
                    <span class="factor-value" id="researchScore"></span>
                </div>
                <div class="factor-item">
                    <span class="factor-label">Publications & Conferences</span>
                    <span class="factor-value" id="pubScore"></span>
                </div>
                <div class="factor-item">
                    <span class="factor-label">Test Scores (GRE)</span>
                    <span class="factor-value" id="greScore"></span>
                </div>
                <div class="factor-item">
                    <span class="factor-label">Letters of Recommendation</span>
                    <span class="factor-value" id="lorScore"></span>
                </div>
                <div class="factor-item">
                    <span class="factor-label">Application Materials</span>
                    <span class="factor-value" id="appScore"></span>
                </div>
                <div class="factor-item">
                    <span class="factor-label">Professional Experience</span>
                    <span class="factor-value" id="workScore"></span>
                </div>
            </div>

            <div class="recommendation" id="recommendations"></div>

            <div class="data-source" id="dataSource"></div>
        </div>
    </div>

    <script>
        // GRE optional toggle
        document.getElementById('greOptional').addEventListener('change', function(e) {
            const greSection = document.getElementById('greSection');
            if (e.target.checked) {
                greSection.style.opacity = '0.5';
                greSection.style.pointerEvents = 'none';
                document.getElementById('greVerbal').value = '';
                document.getElementById('greQuant').value = '';
                document.getElementById('greWriting').value = '';
            } else {
                greSection.style.opacity = '1';
                greSection.style.pointerEvents = 'auto';
            }
        });

        // Slider value displays
        const sliders = [
            { slider: 'research', display: 'researchValue' },
            { slider: 'publications', display: 'pubsValue' },
            { slider: 'conferences', display: 'confsValue' },
            { slider: 'workExp', display: 'workExpValue' },
            { slider: 'teachingExp', display: 'teachingExpValue' },
            { slider: 'awards', display: 'awardsValue' }
        ];

        sliders.forEach(({ slider, display }) => {
            document.getElementById(slider).addEventListener('input', (e) => {
                document.getElementById(display).textContent = e.target.value;
            });
        });

        document.getElementById('admissionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<div class="loading-message">Analyzing your profile and fetching latest admission data...</div>';
            
            setTimeout(() => {
                calculateAdmission();
            }, 1500);
        });

        function calculateAdmission() {
            const programType = document.getElementById('programType').value;
            const targetSchool = document.getElementById('targetSchool').value;
            const specificField = document.getElementById('specificField').value;
            const gpa = parseFloat(document.getElementById('gpa').value);
            const majorGpa = parseFloat(document.getElementById('majorGpa').value) || gpa;
            const college = document.getElementById('college').value;
            const greOptional = document.getElementById('greOptional').checked;
            const greVerbal = parseInt(document.getElementById('greVerbal').value) || 0;
            const greQuant = parseInt(document.getElementById('greQuant').value) || 0;
            const greWriting = parseFloat(document.getElementById('greWriting').value) || 0;
            const research = parseFloat(document.getElementById('research').value);
            const publications = parseInt(document.getElementById('publications').value);
            const conferences = parseInt(document.getElementById('conferences').value);
            const publicationQuality = document.getElementById('publicationQuality').value;
            const workExp = parseFloat(document.getElementById('workExp').value);
            const teachingExp = parseFloat(document.getElementById('teachingExp').value);
            const lorQuality = document.getElementById('lorQuality').value;
            const sopQuality = document.getElementById('sopQuality').value;
            const awards = parseInt(document.getElementById('awards').value);
            const facultyFit = document.getElementById('facultyFit').checked;
            const applyingFunding = document.getElementById('applyingFunding').checked;
            const international = document.getElementById('international').checked;
            const firstGen = document.getElementById('firstGen').checked;
            const underrepresented = document.getElementByI

            let score = 0;
            let maxScore = 100;

            // Determine weights based on program type
            let weights = {};
            if (programType === 'phd') {
                weights = { gpa: 20, research: 30, publications: 20, gre: 8, lor: 10, app: 7, work: 5 };
            } else if (programType === 'masters') {
                weights = { gpa: 30, research: 20, publications: 10, gre: 10, lor: 12, app: 10, work: 8 };
            } else { // professional
                weights = { gpa: 25, research: 5, publications: 5, gre: 10, lor: 15, app: 15, work: 25 };
            }

            // If GRE is optional, redistribute GRE weight to other factors
            if (greOptional) {
                const greWeight = weights.gre;
                weights.gpa += greWeight * 0.4;
                weights.lor += greWeight * 0.3;
                weights.app += greWeight * 0.3;
                weights.gre = 0;
            }

            // GPA Score (use higher of cumulative or major GPA)
            const effectiveGpa = Math.max(gpa, majorGpa);
            const gpaScore = Math.min((effectiveGpa / 4.0) * weights.gpa, weights.gpa);
            score += gpaScore;

            // College prestige (fixed 12 points)
            let collegeScore = 0;
            if (college === 'top10') collegeScore = 12;
            else if (college === 'top50') collegeScore = 10;
            else if (college === 'top100') collegeScore = 7;
            else collegeScore = 5;
            score += collegeScore;

            // Research experience score
            let researchScore = Math.min((research / 4) * weights.research, weights.research);
            // Bonus for extensive research
            if (research >= 3) researchScore *= 1.1;
            score += researchScore;

            // Publications and conferences score
            let pubValue = publications * 2 + conferences * 0.5;
            
            // Quality multiplier
            if (publicationQuality === 'top') pubValue *= 2;
            else if (publicationQuality === 'mid') pubValue *= 1.5;
            else if (publicationQuality === 'local') pubValue *= 1.2;
            
            let pubScore = Math.min((pubValue / 15) * weights.publications, weights.publications);
            score += pubScore;

            // GRE scores
            let greScore = 0;
            if (greOptional) {
                greScore = 0; // No penalty for GRE-optional programs
            } else if (greVerbal > 0 && greQuant > 0) {
                const greTotal = greVerbal + greQuant;
                const grePercentile = (greTotal - 260) / 80; // normalize to 0-1
                
                // For STEM, weight quant more
                const stemFields = ['cs', 'engineering', 'math', 'physics', 'chemistry', 'economics'];
                if (stemFields.includes(specificField)) {
                    const quantWeight = (greQuant - 130) / 40;
                    greScore = (quantWeight * 0.7 + grePercentile * 0.3) * weights.gre;
                } else {
                    greScore = grePercentile * weights.gre;
                }
                
                // Bonus for high writing scores in humanities
                const humanitiesFields = ['english', 'history', 'philosophy'];
                if (humanitiesFields.includes(specificField) && greWriting >= 5.0) {
                    greScore *= 1.15;
                }
            } else if (!greOptional) {
                greScore = weights.gre * 0.3; // penalty for no GRE when required
            }
            score += greScore;

            // Letters of recommendation score
            let lorScore = 0;
            if (lorQuality === 'exceptional') lorScore = weights.lor;
            else if (lorQuality === 'strong') lorScore = weights.lor * 0.85;
            else if (lorQuality === 'good') lorScore = weights.lor * 0.65;
            else lorScore = weights.lor * 0.4;
            score += lorScore;

            // Application materials score
            let appScore = 0;
            if (sopQuality === 'exceptional') appScore = weights.app;
            else if (sopQuality === 'strong') appScore = weights.app * 0.8;
            else if (sopQuality === 'average') appScore = weights.app * 0.6;
            else appScore = weights.app * 0.3;
            
            // Awards bonus
            appScore += Math.min(awards * 0.5, weights.app * 0.3);
            appScore = Math.min(appScore, weights.app * 1.2);
            score += appScore;

            // Work experience score
            let workScore = 0;
            if (programType === 'professional') {
                workScore = Math.min((workExp / 5) * weights.work, weights.work);
            } else {
                workScore = Math.min((workExp / 10) * weights.work * 0.7 + (teachingExp / 5) * weights.work * 0.3, weights.work);
            }
            score += workScore;

            // Calculate base probability
            let probability = (score / maxScore) * 100;

            // Field-specific competitiveness modifiers (more aggressive)
            const fieldModifiers = {
                'cs': 0.65,           // CS is extremely competitive
                'economics': 0.70,    // Econ PhDs very selective
                'psychology': 0.72,   // Clinical psych especially
                'business': 0.75,     // Top MBAs very selective
                'engineering': 0.85,
                'math': 0.75,
                'physics': 0.82,
                'chemistry': 0.88,
                'biology': 0.86,
                'political-science': 0.90,
                'sociology': 0.92,
                'english': 0.80,      // Limited spots
                'history': 0.82,      // Very limited spots
                'philosophy': 0.83,
                'public-policy': 0.88,
                'education': 0.93
            };
            
            if (fieldModifiers[specificField]) {
                probability *= fieldModifiers[specificField];
            }

            // School tier difficulty
            let schoolDifficulty = 1.0;
            let schoolName = '';
            
            // Ultra-realistic difficulty multipliers reflecting actual acceptance rates
            const phdMultiplier = programType === 'phd' ? 0.70 : 1.0;
            
            if (targetSchool === 'top5') {
                schoolDifficulty = 0.08 * phdMultiplier; // Top 5 is BRUTALLY selective (3-8% acceptance)
                schoolName = 'Top 5';
            } else if (targetSchool === 'top10') {
                schoolDifficulty = 0.15 * phdMultiplier; // Top 10 still extremely hard
                schoolName = 'Top 10';
            } else if (targetSchool === 'top25') {
                schoolDifficulty = 0.28 * phdMultiplier;
                schoolName = 'Top 25';
            } else if (targetSchool === 'top50') {
                schoolDifficulty = 0.45 * phdMultiplier;
                schoolName = 'Top 50';
            } else if (targetSchool === 'top100') {
                schoolDifficulty = 0.65;
                schoolName = 'Top 100';
            } else if (targetSchool === 'regional') {
                schoolDifficulty = 0.85;
                schoolName = 'Regional';
            }

            probability *= schoolDifficulty;

            // Bonuses and penalties (further reduced)
            if (facultyFit) probability += 5; // Reduced from 8
            if (applyingFunding && programType === 'phd') probability -= 10; // Increased penalty
            if (international) probability *= 0.82; // Stronger penalty
            if (firstGen) probability += 1.5; // Minimal boost
            if (underrepresented) probability += 2; // Minimal boost

            // Exceptional profile bonus at top schools (very strict)
            if ((targetSchool === 'top5' || targetSchool === 'top10') && programType === 'phd') {
                if (effectiveGpa >= 3.95 && research >= 4 && publications >= 5 && lorQuality === 'exceptional' && facultyFit) {
                    probability += 6; // Minimal boost even for exceptional profiles
                }
            }

            // Professional master's adjustment
            if (programType === 'professional') {
                probability *= 1.12; // Reduced from 1.15
            }

            // Strict caps based on school tier - even perfect profiles face these limits
            if (targetSchool === 'top5') {
                probability = Math.min(probability, 15); // Hard cap at 15% for Top 5
            } else if (targetSchool === 'top10') {
                probability = Math.min(probability, 30); // Hard cap at 30% for Top 10
            } else if (targetSchool === 'top25') {
                probability = Math.min(probability, 55); // Hard cap at 55% for Top 25
            } else if (targetSchool === 'top50') {
                probability = Math.min(probability, 75); // Hard cap at 75% for Top 50
            }

            // Cap probability between 0.5 and 90
            probability = Math.max(0.5, Math.min(90, probability));

            // Machine learning adjustment based on historical patterns
            // Simulate ML predictions based on profile patterns
            const mlAdjustment = applyMLAdjustment(
                effectiveGpa, research, publications, lorQuality, 
                targetSchool, programType, specificField, facultyFit
            );
            probability = probability * mlAdjustment;
            probability = Math.max(1, Math.min(95, probability));

            // Calculate benchmarks
            const benchmarks = calculateBenchmarks(effectiveGpa, research, publications, targetSchool, programType);

            // Analyze strengths and weaknesses
            const analysis = analyzeProfile({
                gpa: effectiveGpa, majorGpa, research, publications, conferences,
                publicationQuality, workExp, teachingExp, lorQuality, sopQuality,
                awards, greVerbal, greQuant, greWriting, facultyFit, programType,
                specificField, targetSchool, greOptional
            }, weights);

            // Fetch real-world data context
            const dataContext = getDataContext(targetSchool, specificField, programType);

            // Display results
            displayResults(
                probability, gpaScore, collegeScore, researchScore, pubScore, 
                greScore, lorScore, appScore, workScore, effectiveGpa, research, 
                publications, schoolName, programType, weights, specificField, 
                benchmarks, analysis, dataContext, greOptional
            );
        }

        // Machine Learning simulation - adjusts based on profile patterns
        function applyMLAdjustment(gpa, research, pubs, lorQuality, school, programType, field, facultyFit) {
            let adjustment = 1.0;
            
            // Pattern 1: High GPA + Low Research (common rejection pattern for PhDs)
            if (programType === 'phd' && gpa >= 3.8 && research < 1.5 && pubs === 0) {
                adjustment *= 0.65; // Strong penalty
            }
            
            // Pattern 2: Moderate GPA + Strong Research (helps, but modest)
            if (programType === 'phd' && gpa >= 3.5 && gpa < 3.7 && research >= 2.5 && pubs >= 2) {
                adjustment *= 1.05; // Minimal boost
            }
            
            // Pattern 3: Faculty fit is helpful but not deterministic
            if ((school === 'top5' || school === 'top10') && facultyFit && lorQuality === 'exceptional') {
                adjustment *= 1.04; // Very small boost
            }
            
            // Pattern 4: CS/Economics need exceptional profiles
            if ((field === 'cs' || field === 'economics') && school === 'top5') {
                if (gpa < 3.90 || research < 3 || pubs < 4) {
                    adjustment *= 0.75; // Strong penalty
                }
            }
            
            // Pattern 5: Professional programs value work experience
            if (programType === 'professional' && workExp >= 5) {
                adjustment *= 1.08; // Modest boost
            }
            
            // Pattern 6: Top 5 schools are lottery-like for everyone
            if (school === 'top5') {
                adjustment *= 0.82; // Strong damper reflecting low acceptance rates
            }
            
            // Pattern 7: No publications at top programs is critical
            if ((school === 'top5' || school === 'top10') && programType === 'phd' && pubs === 0) {
                adjustment *= 0.70; // Major penalty
            }
            
            // Pattern 8: Low GPA is very hard to overcome
            if (gpa < 3.0 && (school === 'top5' || school === 'top10' || school === 'top25')) {
                adjustment *= 0.50; // Severe penalty for low GPA at competitive schools
            } else if (gpa < 3.3 && (school === 'top5' || school === 'top10')) {
                adjustment *= 0.75; // Strong penalty
            }
            
            // Pattern 9: Weak letters at top schools
            if ((school === 'top5' || school === 'top10') && lorQuality === 'generic') {
                adjustment *= 0.70; // Generic letters hurt significantly
            }
            
            return adjustment;
        }

        function analyzeProfile(profile, weights) {
            const strengths = [];
            const weaknesses = [];
            
            // GPA analysis
            if (profile.gpa >= 3.95) {
                strengths.push('Near-perfect GPA - exceptional (though still just one factor among many)');
            } else if (profile.gpa >= 3.85) {
                strengths.push('Excellent GPA - competitive for top programs');
            } else if (profile.gpa >= 3.70) {
                strengths.push('Strong GPA - solid foundation');
            } else if (profile.gpa >= 3.50) {
                strengths.push('Good GPA - competitive for many programs');
            } else if (profile.gpa < 3.30) {
                weaknesses.push('GPA significantly below typical admits - major obstacle for top programs');
            } else if (profile.gpa < 3.50) {
                weaknesses.push('GPA below typical admits at top schools - will need exceptional other factors');
            }
            
            if (profile.majorGpa > profile.gpa && profile.majorGpa >= 3.8) {
                strengths.push('Strong major GPA shows field-specific excellence');
            }
            
            // Research analysis
            if (profile.programType === 'phd') {
                if (profile.research >= 3) {
                    strengths.push('Extensive research experience - PhD-ready');
                } else if (profile.research >= 2) {
                    strengths.push('Solid research foundation for PhD');
                } else if (profile.research < 1.5) {
                    weaknesses.push('Limited research experience for PhD programs');
                }
            }
            
            // Publications analysis
            if (profile.publications >= 4) {
                strengths.push('Exceptional publication record - highly competitive');
            } else if (profile.publications >= 2) {
                strengths.push('Strong publication record demonstrates research capability');
            } else if (profile.publications >= 1) {
                strengths.push('Published work shows research potential');
            } else if (profile.programType === 'phd' && profile.publications === 0 && (profile.targetSchool === 'top5' || profile.targetSchool === 'top10')) {
                weaknesses.push('Top PhD programs strongly prefer publication record - this is a significant gap');
            }
            
            if (profile.publicationQuality === 'top' && profile.publications > 0) {
                strengths.push('Top-tier publications significantly strengthen profile');
            }
            
            // LOR analysis
            if (profile.lorQuality === 'exceptional') {
                strengths.push('Exceptional letters from renowned faculty - major asset');
            } else if (profile.lorQuality === 'generic') {
                weaknesses.push('Generic letters won\'t distinguish your application');
            }
            
            // Work experience
            if (profile.programType === 'professional' && profile.workExp >= 5) {
                strengths.push('Extensive work experience ideal for professional programs');
            } else if (profile.programType === 'professional' && profile.workExp < 2) {
                weaknesses.push('Professional programs typically expect 3-5+ years experience');
            }
            
            if (profile.teachingExp >= 2 && profile.programType === 'phd') {
                strengths.push('Teaching experience valuable for PhD career preparation');
            }
            
            // GRE analysis
            if (!profile.greOptional) {
                const greTotal = profile.greVerbal + profile.greQuant;
                if (greTotal >= 325) {
                    strengths.push('Excellent GRE scores strengthen application');
                } else if (greTotal > 0 && greTotal < 310) {
                    weaknesses.push('GRE scores below typical admits for top programs');
                } else if (greTotal === 0) {
                    weaknesses.push('Missing GRE scores - required for this program tier');
                }
                
                const stemFields = ['cs', 'engineering', 'math', 'physics', 'chemistry', 'economics'];
                if (stemFields.includes(profile.specificField) && profile.greQuant > 0 && profile.greQuant < 160) {
                    weaknesses.push('Quantitative GRE score below typical for ' + profile.specificField);
                }
            }
            
            // Application materials
            if (profile.sopQuality === 'exceptional') {
                strengths.push('Compelling statement of purpose');
            } else if (profile.sopQuality === 'weak') {
                weaknesses.push('Statement of purpose needs significant improvement');
            }
            
            if (profile.awards >= 3) {
                strengths.push('Multiple honors/awards demonstrate excellence');
            }
            
            // Faculty fit
            if (profile.facultyFit) {
                strengths.push('Identified faculty fit - critical for success');
            } else if (profile.programType === 'phd') {
                weaknesses.push('Faculty fit essential - should contact potential advisors');
            }
            
            // Overall balance check
            if (profile.targetSchool === 'top5') {
                weaknesses.push('Top 5 schools (MIT, Stanford, Harvard, etc.) admit only 3-8% of applicants. Even near-perfect profiles face very low odds.');
            } else if (profile.targetSchool === 'top10') {
                weaknesses.push('Top 10 programs admit ~8-15% of applicants. Strong profiles still face significant uncertainty.');
            }
            
            if (strengths.length <= 1) {
                weaknesses.push('Profile needs significant strengthening to be competitive at this tier');
            }
            if (weaknesses.length === 1 && profile.targetSchool !== 'top5' && profile.targetSchool !== 'top10') {
                strengths.push('Well-rounded profile with no major gaps');
            }
            
            return { strengths, weaknesses };
        }

        function getDataContext(school, field, programType) {
            // Simulate web-scraped/ML-trained data about acceptance rates
            // In a real implementation, this would query actual databases or APIs
            
            const acceptanceRates = {
                'top5': { phd: '3-8%', masters: '8-15%', professional: '10-20%' },
                'top10': { phd: '8-15%', masters: '15-25%', professional: '20-30%' },
                'top25': { phd: '15-25%', masters: '25-40%', professional: '30-50%' },
                'top50': { phd: '25-40%', masters: '40-60%', professional: '50-70%' },
                'top100': { phd: '40-60%', masters: '60-80%', professional: '70-85%' },
                'regional': { phd: '60-80%', masters: '80-90%', professional: '85-95%' }
            };
            
            const fieldCompetitiveness = {
                'cs': 'Extremely competitive - one of the most selective fields',
                'economics': 'Highly competitive - strong quant skills required',
                'psychology': 'Very competitive - especially clinical programs',
                'engineering': 'Competitive - varies by subdiscipline',
                'business': 'Highly competitive for top MBA programs',
                'biology': 'Competitive - but more positions available',
                'education': 'Moderate competition - growing field',
                'english': 'Competitive - limited funded positions',
                'history': 'Very competitive - fewer positions available'
            };
            
            const typicalProfiles = {
                'top5': 'GPA: 3.90+, Research: 3-4+ years, Publications: 3-5+, Exceptional LORs from renowned faculty',
                'top10': 'GPA: 3.80+, Research: 2-3+ years, Publications: 2-3+, Strong LORs from established researchers',
                'top25': 'GPA: 3.70+, Research: 1.5-2+ years, Publications: 1-2, Strong LORs',
                'top50': 'GPA: 3.60+, Research: 1+ year, Publications: 0-1, Good LORs',
                'top100': 'GPA: 3.40+, Research: 0.5+ years, Some research experience helpful',
                'regional': 'GPA: 3.20+, Research: Helpful but not always required'
            };
            
            const rate = acceptanceRates[school]?.[programType] || 'Data unavailable';
            const fieldInfo = fieldCompetitiveness[field] || 'Competitive field';
            const profile = typicalProfiles[school] || 'Strong academic record required';
            
            return {
                acceptanceRate: rate,
                fieldCompetitiveness: fieldInfo,
                typicalProfile: profile,
                dataYear: '2024-2025'
            };
        }

        function calculateBenchmarks(gpa, research, pubs, school, programType) {
            // Typical admitted student profiles
            const profiles = {
                'top5': { gpa: 3.85, research: 3, pubs: 3 },
                'top10': { gpa: 3.80, research: 2.5, pubs: 2 },
                'top25': { gpa: 3.70, research: 2, pubs: 1 },
                'top50': { gpa: 3.60, research: 1.5, pubs: 1 },
                'top100': { gpa: 3.50, research: 1, pubs: 0 },
                'regional': { gpa: 3.30, research: 0.5, pubs: 0 }
            };

            const typical = profiles[school] || profiles['top50'];
            
            const gpaPercentile = Math.min(100, Math.max(0, ((gpa - typical.gpa + 0.3) / 0.6) * 100));
            const researchPercentile = Math.min(100, Math.max(0, ((research - typical.research + 1) / 2) * 100));
            const pubsPercentile = Math.min(100, Math.max(0, ((pubs - typical.pubs + 1) / 2) * 100));

            return { gpaPercentile, researchPercentile, pubsPercentile };
        }

        function displayResults(prob, gpaS, collegeS, researchS, pubS, greS, lorS, appS, workS, 
                                gpa, research, pubs, schoolName, programType, weights, field, 
                                benchmarks, analysis, dataContext, greOptional) {
            const resultDiv = document.getElementById('result');
            const probDiv = document.getElementById('probability');
            const textDiv = document.getElementById('resultText');
            
            const programLabel = programType === 'phd' ? 'PhD' : 
                                programType === 'masters' ? "Master's" : 
                                'Professional Master\'s';
            
            probDiv.textContent = prob < 1 ? prob.toFixed(1) + '%' : Math.round(prob) + '%';
            
            // More realistic thresholds
            if (prob >= 50) {
                textDiv.textContent = '‚úì Competitive Chance at ' + schoolName + ' ' + programLabel;
                probDiv.style.color = '#2d5986';
            } else if (prob >= 25) {
                textDiv.textContent = '‚óã Moderate Chance at ' + schoolName + ' ' + programLabel;
                probDiv.style.color = '#8b4513';
            } else if (prob >= 10) {
                textDiv.textContent = '‚ñ≥ Reach School - ' + schoolName + ' ' + programLabel;
                probDiv.style.color = '#c4661f';
            } else if (prob >= 3) {
                textDiv.textContent = '‚ö† High Reach - ' + schoolName + ' ' + programLabel;
                probDiv.style.color = '#a0522d';
            } else {
                textDiv.textContent = '‚ö† Extremely Low Chance - ' + schoolName + ' ' + programLabel;
                probDiv.style.color = '#8b0000';
            }

            // Display benchmarks
            const benchmarkDiv = document.getElementById('benchmark');
            benchmarkDiv.innerHTML = `
                <div style="font-weight: 700; color: #1e3a5f; margin-bottom: 10px; font-size: 16px;">
                    üìä How You Compare to Typical Admits:
                </div>
                <div class="benchmark-item">GPA: ${Math.round(benchmarks.gpaPercentile)}th percentile</div>
                <div class="benchmark-item">Research Experience: ${Math.round(benchmarks.researchPercentile)}th percentile</div>
                <div class="benchmark-item">Publications: ${Math.round(benchmarks.pubsPercentile)}th percentile</div>
            `;

            // Display strengths and weaknesses
            const strengthsList = document.getElementById('strengthsList');
            const weaknessesList = document.getElementById('weaknessesList');
            
            strengthsList.innerHTML = analysis.strengths.map(s => `<li>${s}</li>`).join('');
            weaknessesList.innerHTML = analysis.weaknesses.map(w => `<li>${w}</li>`).join('');

            // Display data source information
            const dataSourceDiv = document.getElementById('dataSource');
            dataSourceDiv.innerHTML = `
                <strong>üìö Data Context (${dataContext.dataYear}):</strong><br>
                <strong>Acceptance Rate:</strong> ${dataContext.acceptanceRate} for this program type<br>
                <strong>Field Competitiveness:</strong> ${dataContext.fieldCompetitiveness}<br>
                <strong>Typical Admitted Profile:</strong> ${dataContext.typicalProfile}
            `;

            // Display factor scores
            document.getElementById('gpaScore').textContent = Math.round(gpaS) + '/' + Math.round(weights.gpa);
            document.getElementById('collegeScore').textContent = Math.round(collegeS) + '/12';
            document.getElementById('researchScore').textContent = Math.round(researchS) + '/' + Math.round(weights.research);
            document.getElementById('pubScore').textContent = Math.round(pubS) + '/' + Math.round(weights.publications);
            document.getElementById('greScore').textContent = greOptional ? 'N/A (Optional)' : Math.round(greS) + '/' + Math.round(weights.gre);
            document.getElementById('lorScore').textContent = Math.round(lorS) + '/' + Math.round(weights.lor);
            document.getElementById('appScore').textContent = Math.round(appS) + '/' + Math.round(weights.app);
            document.getElementById('workScore').textContent = Math.round(workS) + '/' + Math.round(weights.work);

            // Generate tailored recommendations
            let recommendations = '<h3>Personalized Recommendations</h3><ul>';
            
            if (programType === 'phd') {
                if (research < 2) {
                    recommendations += '<li><strong>Critical:</strong> PhD programs require substantial research. Aim for at least 2 years of dedicated research experience.</li>';
                }
                if (pubs < 1 && prob < 50) {
                    recommendations += '<li><strong>Important:</strong> Publications significantly strengthen PhD applications. Consider working toward at least one publication.</li>';
                }
                if (lorS < weights.lor * 0.7) {
                    recommendations += '<li>Build stronger relationships with professors who can write compelling letters highlighting your research potential.</li>';
                }
                if (!document.getElementById('facultyFit').checked) {
                    recommendations += '<li><strong>Highly Recommended:</strong> Contact potential advisors. Faculty fit is crucial for PhD admissions.</li>';
                }
            } else if (programType === 'professional') {
                if (workS < weights.work * 0.6) {
                    recommendations += '<li>Professional programs heavily value work experience. Consider gaining 2-3+ years of relevant experience.</li>';
                }
                if (gpa < 3.3) {
                    recommendations += '<li>Your GPA is below typical admits. Strong work experience and application essays can compensate.</li>';
                }
            } else {
                if (gpa < 3.5) {
                    recommendations += '<li>Focus on maintaining strong grades. Master\'s programs weigh GPA heavily.</li>';
                }
                if (research < 1 && field !== 'business') {
                    recommendations += '<li>Some research experience would strengthen your application for research-based master\'s programs.</li>';
                }
            }

            // Field-specific advice
            const competitiveFields = ['cs', 'economics', 'psychology'];
            if (competitiveFields.includes(field) && prob < 40) {
                recommendations += '<li>This field is highly competitive. Consider applying to a wider range of schools including safety options.</li>';
            }

            // GRE advice
            const greVerbal = parseInt(document.getElementById('greVerbal').value) || 0;
            const greQuant = parseInt(document.getElementById('greQuant').value) || 0;
            const greOptional = document.getElementById('greOptional').checked;
            
            if (!greOptional && greVerbal === 0 && greQuant === 0 && prob < 60) {
                recommendations += '<li>Taking the GRE could strengthen your application, especially for top programs.</li>';
            } else if (!greOptional && greQuant < 160 && ['cs', 'engineering', 'math', 'physics', 'economics'].includes(field)) {
                recommendations += '<li>For ' + field + ', aim for GRE Quantitative score of 165+ to be competitive at top programs.</li>';
            }

            if (prob < 30) {
                recommendations += '<li><strong>Strategy:</strong> This is a highly selective school. Apply to 12-15+ schools across different tiers.</li>';
            }
            if (prob >= 50) {
                recommendations += '<li>You\'re competitive, but acceptance is never guaranteed at selective schools. Apply broadly.</li>';
            } else if (prob >= 25) {
                recommendations += '<li>You have a chance, but odds are challenging. Strengthen other parts of application and apply to many schools.</li>';
            } else if (prob < 10) {
                recommendations += '<li><strong>Reality Check:</strong> Your chances are very low for this tier. Strongly consider applying to less selective programs.</li>';
            }
            
            // Reality check for top schools
            if (targetSchool === 'top5') {
                recommendations += '<li><strong>Critical:</strong> Top 5 schools have ~3-8% acceptance rates. Even the strongest applicants face rejection. This should be a reach school in a balanced application strategy.</li>';
            } else if (targetSchool === 'top10') {
                recommendations += '<li><strong>Important:</strong> Top 10 programs are extremely selective (~8-15% acceptance). Apply to safety schools.</li>';
            }
            
            if (benchmarks.gpaPercentile < 30) {
                recommendations += '<li>Your GPA is below average for this tier. Emphasize other strengths in your application.</li>';
            }
            if (document.getElementById('international').checked) {
                recommendations += '<li>As an international student, demonstrate strong English proficiency and clear funding plans.</li>';
            }
            
            recommendations += '</ul>';
            document.getElementById('recommendations').innerHTML = recommendations;

            resultDiv.classList.add('show');
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    </script>
</body>
</html>
